<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Lista de Propostas</title>
    <link rel="stylesheet" href="/css/style.css">
    <script src="/js/auth.js"></script>
    <script src="/js/edit.js"></script>
    <script src="/js/script.js"></script>
    <style>

        table {
          text-align: center;
          width: 80%;
          border-collapse: collapse;
          font-family: Arial, sans-serif;
          font-size: 14px;
          margin: 20px 0;
        }

        thead {
          background-color: #2D5C88;
          color: white;
        }

        thead th {
          padding: 12px;
          text-align: left;
          border-bottom: 2px solid #1c3d5d;
        }

        tbody tr {
          border-bottom: 1px solid #ddd;
        }

        tbody tr:nth-child(even) {
          background-color: #f9f9f9;
        }

        tbody td {
          padding: 10px;
          color: #333;
        }

        tbody tr:hover {
          background-color: #f1f1f1;
          cursor: pointer;
        }

        .text-bold{
            font-weight: 700;
        }

    </style>
</head>
<body>
<h1>Or√ßamentos emitidos</h1>

<br>

<h3>Filtrar Or√ßamentos:</h3>
<div style="display: flex; gap: 10px;">

    <a href="/mostrarEmAberto" class="botao">ABERTO</a>
    <a href="/mostrarAgendados" class="botao">AGENDADOS</a>
    <a href="/mostrarNaoAprovados" class="botao">N√ÉO APROVADOS</a>
    <a href="/mostrarFinalizados" class="botao">APROVADOS - FINALIZADOS</a>
    <div style="margin-left: auto;">
        <a href="/index" class="botao">VOLTAR</a>
    </div>
</div>


<table>
    <thead>
    <tr>
        <th>N√∫mero de Contrato</th>
        <th>Nome</th>
        <th>CPF/CNPJ</th>
        <th>Data</th>
        <th>Telefone</th>
        <th>Email</th>
        <th>Localiza√ß√£o</th>
        <th>Servi√ßo</th>
        <th>Tipo</th>
        <th>Pre√ßo</th>
        <th>Deslocamento</th>
        <th>Total</th>
        <th>Status do Or√ßamento</th>
        <th>A√ß√µes</th>
    </tr>
    </thead>
    <tbody>

    <tr th:each="client : ${clients}"
        th:style="${client.serviceStatus == 'Aberto'} ? 'background-color:#fff9c4;' :
              (${client.serviceStatus == 'Finalizado'} ? 'background-color:#bbdefb;' :
              (${client.serviceStatus == 'N√£o Aprovado'} ? 'background-color:#ffcdd2;' : ''))">

        <td th:text="${client.contract}" data-label="Contrato"></td>
        <td th:text="${client.name}" data-label="Nome"></td>
        <td th:text="${client.id}" data-label="CPF/CNPJ"></td>
        <td th:text="${client.date}" data-label="Data"></td>
        <td th:text="${client.foneNumber}" data-label="Telefone"></td>
        <td th:text="${client.email}" data-label="Email"></td>
        <td th:text="${client.location}" data-label="Localiza√ß√£o"></td>
        <td th:text="${#strings.length(client.serviceDetails) > 50 ? #strings.substring(client.serviceDetails, 0, 50) + '...' : client.serviceDetails}"
            data-label="Servi√ßo"></td>
        <td th:text="${client.serviceType}" data-label="Tipo"></td>
        <td th:text="${client.servicePriceFormated}" data-label="Pre√ßo"></td>
        <td th:text="${client.deslocationPriceFormated}" data-label="Deslocamento"></td>
        <td th:text="${client.totalPriceFormated}" data-label="Total" class="text-bold"></td>
        <td th:text="${client.serviceStatus}" data-label="Status do or√ßamento"></td>


        <td>
            <button th:onclick="'editarContrato(' + ${client.contract} + ')'" class="button">‚úèÔ∏è</button>
            <button th:onclick="'deletarContrato(' + ${client.contract} + ')'" class="button">üóëÔ∏è</button>

            <form action="/gerar-pdf-existente" method="post">
                <input type="hidden" name="numeroContrato" th:value="${client.contract}">
                <button type="submit" class="button">PDF</button>
            </form>
        </td>
    </tr>


    <div id="modalEdicao" class="modal" style="display:none;">
        <div class="modal-content" id="modalContent">
            <span onclick="fecharModal()" class="close">&times;</span>

        </div>
    </div>
    </tbody>
</table>



</body>

<div style="margin-right: 10px; padding-bottom: 5px">
    <a href="/index" class="botao" >VOLTAR</a>
</div>
</html>